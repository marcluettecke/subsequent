@import "variables";
@import "mixins";
@import "functions";

%heading {
  font-size: 5rem;
  font-weight: bold;
  letter-spacing: 0.5rem;
  @include xSmall {
    font-size: 3rem;
  }
}

.feature-bullet {
  font-size: 3rem;
  @include xSmall {
    font-size: 2.2rem;
  }
}

.analysis-features {
  color: white;
}

.text-container-analysis {
  margin-top: 4rem;

  h1 {
    @extend %heading;
    color: $--white;
  }
}

.top-disclaimer {
  background: #000;
  color: #fff;
  text-align: center;
  padding: 60px;
  h1 {
    font-size: 34px;
    font-weight: bold;
  }
  p {
    width: 100%;
    max-width: 400px;
    margin: 0px auto;
  }
}
#background-video-container {
  display: block;
  position: relative;
  color: #fff;
  .img-video-wrapper {
    position: absolute;
    &.fixed-position {
      position: fixed;
    }
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100vh;
    min-height: 100vh;
    z-index: -1;
    overflow: hidden;
    img,
    video {
      display: inline-block;
      position: absolute;
      left: 50%; /* % of surrounding element */
      top: 50%;
      transform: translate(-50%, -50%); /* % of current element */
      padding: 0px;
      margin: 0px;
      z-index: 0;
      height: 100%;
      width: 177.77777778vh; /*100 * 16 / 9 */
      min-width: 100%;
      min-height: 56.25vw; /* 100 * 9 / 16 */
    }
    video {
      opacity: 0;
      z-index: 1;
      transition: opacity 0.5s ease;
    }
    &.show-video {
      video {
        opacity: 1;
        transition: opacity 0.5s ease;
      }
    }

    @include sm {
      display: none;
    }
  }
  .slide-page-content-1 {
    position: relative;
    width: 100%;
    height: 100vh;
    min-height: 100vh;
    .inner-container {
      position: relative;
      min-height: 100vh;
      p {
        position: absolute;
        width: 25%;
        left: 75px;
        top: 50%;
        transform: translate3d(-50%, -50%);
        text-align: left;
      }
      @include sm {
        height: auto;
        min-height: 0px;
        padding: 60px 20px;
        p {
          position: relative;
          left: inherit;
          width: 100%;
        }

        background: $--black url("/assets/images/background-dark.jpg") no-repeat
          center;
        background-size: cover;
      }
    }
  }
  .slide-page-content-2 {
    position: relative;
    width: 100%;
    height: 100vh;
    min-height: 100vh;
    .inner-container {
      display: flex;
      flex-flow: row nowrap;
      justify-content: space-between;
      align-items: center;
      .bullets-container {
        position: relative;
        .pillar-headline {
          font-size: 34px;
          font-weight: bold;
          justify-self: center;
          text-transform: uppercase;
        }
        p.bullet-point-item {
          position: relative;
          font-size: 22px;
          margin: 120px 0px;
          img {
            position: absolute;
            width: 35px;
            top: 50%;
            transform: translate(0px, -50%);
          }
        }
        $outerMargin: 75px;
        $innerItemMargin: 45px;
        .cable-container {
          display: inline-block;
          position: absolute;
          top: calc(15vh + 20px);
          // background: #ccf;
          width: 30px;
          height: 90vh;
          text-align: center;
          .inner-cable {
            display: inline-block;
            min-height: 100%;
            min-width: 3px;
            background-color: $--primary-dark;
          }
        }
        &.bullets-container-left {
          justify-self: start;
          text-align: left;
          margin-left: $outerMargin;
          p {
            margin-left: $innerItemMargin;
            img {
              left: -45px;
            }
          }
          .cable-container {
            left: -30px;
          }
        }
        &.bullets-container-right {
          justify-self: end;
          text-align: right;
          margin-right: $outerMargin;
          p {
            margin-right: $innerItemMargin;
            img {
              right: -45px;
            }
          }
          .cable-container {
            right: -30px;
            .inner-cable {
              background-color: $--white;
            }
          }
        }
      }
    }
    @include sm {
      height: auto;
      min-height: 0px;
      .inner-container {
        display: block;
        .bullets-container {
          padding: 60px 20px;
          .pillar-headline {
            font-size: 26px;
            text-align: center;
            margin-bottom: 60px;
          }
          p.bullet-point-item {
            margin-top: 60px;
            margin-bottom: 0px;
            font-size: 16px;
          }
          $innerItemMargin: 90px;
          &.bullets-container-left {
            margin-left: 0px;
            background: $--white url("/assets/images/background-light.jpg")
              no-repeat center;
            background-size: cover;
            color: $--black;
            p {
              margin-left: $innerItemMargin;
            }
          }
          &.bullets-container-right {
            margin-right: 0px;
            background: $--black url("/assets/images/background-dark.jpg")
              no-repeat center;
            background-size: cover;
            color: $--white;
            p {
              margin-right: $innerItemMargin;
            }
          }
        }
      }
    }
  }
}

#feature-overview {
  position: relative;

  .datapoints {
    z-index: -1;
    &__1 {
      position: absolute;
      width: 65rem;
      top: 100vh;
      left: -27rem;

      @include lg {
        width: 68rem;
        top: 94vh;
        left: -40rem;
      }
    }
    &__2 {
      position: absolute;
      height: 45rem;
      top: 100vh;
      left: 90rem;
      transform: rotate(120deg);

      @include lg {
        top: 91vh;
      }
      @include md {
        display: none;
      }
    }
    &__3 {
      position: absolute;
      height: 60rem;
      top: -11rem;
      left: 75rem;
      transform: rotate(230deg);

      @include lg {
        left: 67rem;
      }
      @include md {
        left: 50rem;
      }
    }
    &__4 {
      position: absolute;
      height: 40rem;
      top: 35rem;
      transform: rotate(130deg);

      @include lg {
        height: 40rem;
        top: 50rem;
      }
      @include md {
        height: 40rem;
        top: 50rem;
      }
    }
  }

  .rotating-body {
    position: absolute;
    top: 25%;
    left: 50%;
    max-width: 300px;
    z-index: 98;

    transform: translate3d(-50%, -50%, 0);

    @include xSmall {
      display: none;
    }

    video {
      width: 100%;
      height: auto;
      max-height: 65vh;
    }
  }

  .layout-container {
    // height: 174vh;
    z-index: 97;
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    grid-template-areas:
      "extraction analysis"
      "details details";

    @include md {
      grid-template-columns: 1fr;
      grid-template-rows: repeat(3, 1fr);
      grid-template-areas:
        "extraction"
        "analysis"
        "details";
    }

    .feature-container {
      position: relative;
      .mobile-background-sidebar {
        position: absolute;
        z-index: 1;
        top: 0px;
        width: 60px;
        height: 100%;
        &.light {
          left: 0px;
          background-color: $--white;
        }
        &.dark {
          right: 0px;
          background-color: $--black;
        }
      }

      &.extraction-container {
        grid-area: extraction;
        background: #fff url("/assets/images/background-light.jpg") no-repeat
          center;
        background-size: cover;
        .text-container-extraction {
          margin-top: 4rem;

          h1 {
            @extend %heading;
          }
        }
      }

      &.analysis-container {
        grid-area: analysis;
        background: #fff url("/assets/images/background-dark.jpg") no-repeat
          center;
        background-size: cover;
        .text-container-analysis {
          margin-top: 4rem;

          h1 {
            @extend %heading;
          }
        }
      }
    }
  }

  .container-featureList {
    position: relative;
    grid-area: details;
    display: grid;
    grid-template-columns: 1fr 1fr;

    //logic for network-graphic-size:
    $networkGraphicwrapperWidth: 1200px;

    $heightRatio: 0.85;
    $networkGraphicwrapperHeight: $networkGraphicwrapperWidth * $heightRatio;
    $outerScreenBorderColor: #888;
    $innerScreenBorderColor: #333;
    $screenRotation: rotateX(-28deg) rotateY(28deg);
    $screenTranslate: translate3d(-50%, -15px, 0);

    //animations
    @keyframes pulsatingScreenLight {
      0% {
        border-color: $outerScreenBorderColor;
        box-shadow: none;
      }
      16% {
        border-color: $--primary;
        box-shadow: 0 0 10px $--primary;
      }
      30% {
        border-color: $--primary;
        box-shadow: 0 0 10px $--primary;
      }
      48% {
        border-color: $outerScreenBorderColor;
        box-shadow: none;
      }
    }

    @keyframes pulsatingScreenDark {
      0% {
        border-color: $outerScreenBorderColor;
        box-shadow: none;
      }
      16% {
        border-color: $--white;
        box-shadow: 0 0 10px $--white;
      }
      30% {
        border-color: $--white;
        box-shadow: 0 0 10px $--white;
      }
      48% {
        border-color: $outerScreenBorderColor;
        box-shadow: none;
      }
    }

    // padding-bottom: $heightRatio;
    min-height: 1200px * $heightRatio;
    @include xl {
      // $networkGraphicwrapperWidth: 992px;
      min-height: 992px * $heightRatio;
    }
    @include lg {
      // $networkGraphicwrapperWidth: 768px;
      min-height: 768px * $heightRatio;
    }
    @include md {
      // $networkGraphicwrapperWidth: 578px;
      min-height: 578px * $heightRatio;
    }
    @include sm {
      // $networkGraphicwrapperWidth: 320px;
      min-height: 320px * $heightRatio;
    }

    .background-container {
      width: 100%;
      height: 100%;
      &.light-background {
        background: #fff url("/assets/images/background-light.jpg") no-repeat
          center;
      }
      &.dark-background {
        background: #000 url("/assets/images/background-dark.jpg") no-repeat
          center;
      }
      background-size: cover;
    }

    .network-graphic-container {
      position: absolute;
      display: flex;
      align-content: center;
      justify-content: center;
      left: 0px;
      top: 0px;
      width: 100%;
      height: 100%;
      .network-graphic-wrapper {
        position: relative;
        justify-self: center;
        align-self: center;
        width: 1200px;
        @include medium {
          width: 940px;
        }
        @include small {
          width: 578px;
        }
        @include xSmall {
          width: 320px;
        }
        height: 100%;

        #networkGraphicCanvas {
          position: absolute;
          z-index: 2;
          left: 0px;
          top: 0px;
          width: 100%;
          height: 100%;

          line.network-cable {
            stroke-width: 3;
            &.left {
              stroke: #8cd0de;
            }
            &.right {
              stroke: #fff;
            }
            @include md {
              stroke-width: 2.5;
            }
          }
        }

        //FEATURE SCREENS
        .feature-screen-wrapper {
          position: absolute;
          z-index: 3;
          border-left: #000 solid 6px;
          border-top: #000 solid 5px;
          @include md {
            border-left: #000 solid 4px;
            border-top: #000 solid 2px;
          }
          border-color: $outerScreenBorderColor;
          transform: $screenTranslate $screenRotation;
          transition: border 0.3s ease-out, box-shadow 0.3s ease-out;

          &:hover {
            cursor: pointer;
            border-color: $--primary;
            box-shadow: 0 0 10px $--primary;
            transition: border 0.3s ease-out, box-shadow 0.3s ease-out;
          }
          &:not(:hover) {
            @for $i from 1 through 6 {
              &:nth-of-type(#{$i}) {
                &.in-light {
                  animation: pulsatingScreenLight
                    5s
                    linear
                    infinite
                    #{randomNum(5, 30) /
                    3}s;
                }
                &.in-dark {
                  animation: pulsatingScreenDark
                    5s
                    linear
                    infinite
                    #{randomNum(5, 30) /
                    3}s;
                }
              }
            }
          }

          .feature-screen-border {
            border: $innerScreenBorderColor solid 5px;
            @include md {
              border: $innerScreenBorderColor solid 1px;
            }
          }
        }
      }
    }

    .details-grid {
      grid-column: 2;
      height: 87vh;
      margin-bottom: 5rem;
      z-index: 2;

      // width: auto;

      display: grid;
      grid-template-columns: repeat(8, 1fr);
      grid-template-rows: repeat(7, 1fr);
      grid-gap: 3rem;
      justify-items: center;
      align-items: center;

      .first-extraction-feature {
        grid-row: 2 / span 2;
        grid-column: 2 / span 3;
      }
      .second-extraction-feature {
        grid-row: 5 / span 2;
        grid-column: 2 / span 2;
      }
      .third-extraction-feature {
        grid-row: 6 / span 1;
        grid-column: 4 / span 2;
      }
      .first-analysis-feature {
        grid-row: 3 / span 2;
        grid-column: 5 / span 2;
      }
      .second-analysis-feature {
        grid-row: 4 / span 2;
        grid-column: 8 / span 1;
      }
      .third-analysis-feature {
        grid-row: 6 / span 1;
        grid-column: 6 / span 2;
      }
    }

    img {
      width: 100%;
      height: auto;
      display: block;
      object-fit: cover;

      // $rotation: rotateX(-29deg) rotateY(51deg);
      // transform: $rotation;

      // &:hover {
      //   transition: 0.5s;
      //   transform: $rotation scale(1.2);
      //   cursor: pointer;
      // }
    }
  }
}
